<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="subpage">
    <header>
        <h1 style="font-family: 'Creepster',cursive; color: rgb(138, 35, 35); padding-left: 50px; font-size: 50px;">Gallery</h1>
    </header>

    <main>
        <div class="carousel-container">
            <button id="prevBtn">❮</button>
            <div class="carousel">
                <img id="carouselImage" src="" alt="Gallery Image" onclick="openLightbox()">
            </div>
            <button id="nextBtn">❯</button>
        </div>

        <!-- Lightbox for Enlarged Image -->
        <div id="lightbox" class="lightbox" onclick="closeLightbox()">
            <button onclick="closeLightbox()" class="close-btn">✖</button>
            <img id="lightboxImage" src="" alt="Enlarged Image">
        </div>
        

    </main>

    <script>
        let images = [];
        let currentIndex = 0;
        const carouselImage = document.getElementById("carouselImage");

        async function fetchGalleryImages() {
            try {
                const response = await fetch("http://127.0.0.1:5000/gallery");
                const data = await response.json();
                console.log("Fetched images:", data);

                images = data.images.map(img => `http://127.0.0.1:5000/gallery_imgs/${img}`);
                console.log("Image URLs:", images);

                if (images.length > 0) {
                    currentIndex = 0;
                    updateCarousel();
                }
            } catch (error) {
                console.error("Failed to load images:", error);
            }
        }

        function updateCarousel() {
            carouselImage.src = images[currentIndex];
        }

        document.getElementById("prevBtn").addEventListener("click", () => {
            currentIndex = (currentIndex - 1 + images.length) % images.length;
            updateCarousel();
        });

        document.getElementById("nextBtn").addEventListener("click", () => {
            currentIndex = (currentIndex + 1) % images.length;
            updateCarousel();
        });

        fetchGalleryImages();

        function openLightbox() {
    const lightbox = document.getElementById("lightbox");
    const lightboxImage = document.getElementById("lightboxImage");
    
    lightboxImage.src = document.getElementById("carouselImage").src;
    lightbox.style.display = "flex";
}

function closeLightbox() {
    document.getElementById("lightbox").style.display = "none";
}


    </script>
</body>
</html>
